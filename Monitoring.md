# Мониторинг

Чтобы запустить готовую панель мониторинга в Grafana, необходимо выполнить следующие шаги после успешного запуска сервиса через Docker Compose:

Перейдите по адресу http://localhost:3000/login и авторизуйтесь, используя имя пользователя и пароль из файла services/.env.
В разделе Источники данных (Data sources) укажите Prometheus с адресом http://prometheus:9090.
Выполните команду python fix_datasource_uid.py из корневой директории, чтобы изменить UID для текущей сессии Grafana и загрузить панель мониторинга.
Перейдите в раздел Панели мониторинга (Dashboards) в Grafana, затем выберите Создать (New) -> Импорт (Import). Теперь просто скопируйте содержимое файла dashboard.json, вставьте его в соответствующее поле и нажмите Загрузить (Load).



Дашборд можно увидеть после запуска сервиса через Docker Compose или посмотрев на файл app_dashik.jpg.

Мониторинг основан на отслеживании метрик инфраструктуры (e.g. RAM/CPU usage), метрик уровня сервиса (например, абсолютное/относительное изменение времени обработки запросов) и метрик в реальном времени (в данном случае они представлены прогнозами модели после серии запросов к API).



## Для мониторинга выбраны метрики нескольких слоев:

### Инфраструткурный слой:
 - Использование оперативной памяти (RAM)
Эта метрика выбрана потому, что при разработке приложения важно следить за использованием ресурсов. Для визуализации используется график типа Gauge , так как в данном случае это позволяет легче контролировать использование памяти приложением.


### Метрики реального времени:
 - Квантили прогнозов

Эта метрика выбрана, поскольку в сервисе используется обученная модель, которая может начать выдавать неразумные результаты на некоторых входных данных. Для отслеживания этого мы рассчитываем квантили прогнозов модели (5%, 50% и 95%).
 - Количество высоких оценок
Эта метрика выбрана, поскольку может быть интересно узнать, сколько квартир модель оценивает ценой выше 10 миллионов.

### Метрики прикладного уровня:

 - Изменение длительности запросов / мин и Количество запросов / мин
Эти метрики используются для сбора данных о самом сервисе.

